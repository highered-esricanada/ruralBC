<html>
<head>

<link rel="stylesheet" href="https://js.arcgis.com/3.24/esri/css/esri.css">
<script src="https://js.arcgis.com/3.24/"></script>

<style>
#newdatasets {
  border-right: 1px solid #000;
  padding: 0 0 1em 0;
  margin-bottom: 1em;
  font-family: 'Trebuchet MS', 'Lucida Grande',
   Verdana, Lucida, Geneva, Helvetica, 
   Arial, sans-serif;
  background-color: #90bade;
  color: #333;
}

#newdatasets ul {
  list-style: none;
  margin: 0;
  padding: 0;
  border: none;
}
  
#newdatasets li {
  border-bottom: 1px solid #90bade;
  margin: 0;
}

#newdatasets li a {
  display: block;
  padding: 5px 5px 5px 0.5em;
  border-left: 10px solid #1958b7;
  border-right: 10px solid #508fc4;
  background-color: #2175bc;
  color: #fff;
  text-decoration: none;
  width: 100%;
} html>body #newdatasets li a {
  width: auto;

} #newdatasets li a:hover {
  border-left: 10px solid #1c64d1;
  border-right: 10px solid #5ba3e0;
  background-color: #2586d7;
  color: #fff;
}
</style>

<script>
require([
  "esri/arcgis/Portal", 
  "dojo/_base/json" 
], 
function(arcgisPortal, JSON) {
  var monthNames = [
    "January", "February", "March",
    "April", "May", "June", "July",
    "August", "September", "October",
    "November", "December"
  ];

  var UNIX_today = Math.round((new Date()).getTime());
  var UNIX_90daysago = UNIX_today - (86400000 * 90);

  var portal = new arcgisPortal.Portal('http://www.arcgis.com');
  var params = {
    q: 'orgid: d2AjSFw01XGyHQgE AND type:map', // AND uploaded: [0000001519862400000 TO 0000001527724800000]',
    sortField: 'updated',
    start: 1,
    num: 5
    //orgid: 2350126402
  };
  portal.queryItems(params).then(function(result){
  	console.log(result);
  	dataset = result.results;

	var newdatasets = '';
	newdatasets += '<ul>'

	for(var x=0;x<dataset.length;x++){
	  newdatasets += '<li><a href="https://ruralbc.maps.arcgis.com/home/item.html?id=' + dataset[x].id + '" target="_blank">' + dataset[x].title + '<br />';
	  newdatasets += 'Uploaded by: ' + dataset[x].owner + '<br />';
	  newdatasets += 'Last Updated: ' + dataset[x].modified.getDate() + ' ' +  monthNames[dataset[x].modified.getMonth()] + ' ' + dataset[x].modified.getFullYear() + '</a></li>';
	}; 

	newdatasets += '</ul>';
	document.getElementById("newdatasets").innerHTML = newdatasets;
  });
});
</script>


</head>
<body>
<div id="newdatasets" style="height:500px;overflow-y:scroll;border: 1px solid;">
	
</div>
</body>
</html>


